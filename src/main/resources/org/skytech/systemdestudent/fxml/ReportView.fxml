<?xml version="1.0" encoding="UTF-8"?>

    <?import javafx.geometry.Insets?>
    <?import javafx.scene.control.*?>
    <?import javafx.scene.layout.*?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<VBox prefHeight="500.0" prefWidth="1000.0" spacing="10"
      xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="org.skytech.systemdestudent.controller.ReportController">

        <padding>
            <Insets top="10" right="10" bottom="10" left="10"/>
        </padding>

        <!-- Top - Report Options -->
        <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-border-color: #bdc3c7; -fx-border-radius: 5;">
            <Label text="Report Generation" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
            <Separator/>

            <GridPane hgap="15" vgap="10">
                <columnConstraints>
                    <ColumnConstraints percentWidth="33"/>
                    <ColumnConstraints percentWidth="33"/>
                    <ColumnConstraints percentWidth="34"/>
                </columnConstraints>

                <!-- Student Transcript Section -->
                <VBox spacing="8" GridPane.columnIndex="0" GridPane.rowIndex="0"
                      style="-fx-background-color: #e8f5e9; -fx-padding: 10; -fx-border-radius: 5; -fx-background-radius: 5;">
                    <Label text="ðŸ“„ Student Transcript" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <Separator/>
                    <Label text="Select Student:"/>
                    <ComboBox fx:id="transcriptStudentComboBox" promptText="Choose student" prefWidth="Infinity"/>
                    <Button text="Generate Transcript" onAction="#handleGenerateTranscript"
                            prefWidth="Infinity"
                            style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold;"/>
                </VBox>

                <!-- Course Roster Section -->
                <VBox spacing="8" GridPane.columnIndex="1" GridPane.rowIndex="0"
                      style="-fx-background-color: #fff3e0; -fx-padding: 10; -fx-border-radius: 5; -fx-background-radius: 5;">
                    <Label text="ðŸ“‹ Course Roster" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <Separator/>
                    <Label text="Select Course:"/>
                    <ComboBox fx:id="rosterCourseComboBox" promptText="Choose course" prefWidth="Infinity"/>
                    <Button text="Generate Course Roster" onAction="#handleGenerateCourseRoster"
                            prefWidth="Infinity"
                            style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold;"/>
                </VBox>

                <!-- Enrollment Summary Section -->
                <VBox spacing="8" GridPane.columnIndex="2" GridPane.rowIndex="0"
                      style="-fx-background-color: #f3e5f5; -fx-padding: 10; -fx-border-radius: 5; -fx-background-radius: 5;">
                    <Label text="ðŸ“Š Enrollment Summary" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <Separator/>
                    <Label text="Semester:"/>
                    <ComboBox fx:id="semesterComboBox" promptText="Select semester" prefWidth="Infinity">
                        <items>
                            <FXCollections fx:factory="observableArrayList">
                                <String fx:value="All"/>
                                <String fx:value="Fall"/>
                                <String fx:value="Spring"/>
                                <String fx:value="Summer"/>
                            </FXCollections>
                        </items>
                    </ComboBox>
                    <Label text="Academic Year:"/>
                    <TextField fx:id="academicYearField" promptText="e.g., 2024/2025"/>
                    <Button text="Generate Summary" onAction="#handleGenerateSummary"
                            prefWidth="Infinity"
                            style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-font-weight: bold;"/>
                </VBox>
            </GridPane>

            <Separator/>

            <!-- Statistics Section -->
            <HBox spacing="30" alignment="CENTER" style="-fx-background-color: #ecf0f1; -fx-padding: 10; -fx-border-radius: 5; -fx-background-radius: 5;">
                <VBox alignment="CENTER" spacing="5">
                    <Label text="Total Students" style="-fx-font-size: 12px;"/>
                    <Label fx:id="totalStudentsLabel" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #3498db;"/>
                </VBox>
                <Separator orientation="VERTICAL"/>
                <VBox alignment="CENTER" spacing="5">
                    <Label text="Total Courses" style="-fx-font-size: 12px;"/>
                    <Label fx:id="totalCoursesLabel" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #27ae60;"/>
                </VBox>
                <Separator orientation="VERTICAL"/>
                <VBox alignment="CENTER" spacing="5">
                    <Label text="Total Enrollments" style="-fx-font-size: 12px;"/>
                    <Label fx:id="totalEnrollmentsLabel" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #9b59b6;"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="ðŸ”„ Refresh Statistics" onAction="#handleRefreshStatistics"
                        style="-fx-background-color: #34495e; -fx-text-fill: white;"/>
            </HBox>
        </VBox>

        <!-- Bottom - Report Display Area -->
        <VBox spacing="10" VBox.vgrow="ALWAYS">
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label fx:id="reportTitleLabel" text="Report Display Area"
                       style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="Print" onAction="#handlePrint" disable="true"
                        style="-fx-background-color: #7f8c8d; -fx-text-fill: white;"/>
                <Button text="Clear" onAction="#handleClearReport"
                        style="-fx-background-color: #95a5a6; -fx-text-fill: white;"/>
            </HBox>

            <!-- Report Content Area -->
            <TabPane fx:id="reportTabPane" VBox.vgrow="ALWAYS" tabClosingPolicy="UNAVAILABLE">

                <!-- Transcript Tab -->
                <Tab text="ðŸ“„ Transcript">
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <Label fx:id="transcriptHeaderLabel" text="Student Transcript"
                               style="-fx-font-size: 14px; -fx-font-weight: bold;"/>

                        <TextArea fx:id="transcriptTextArea" editable="false" wrapText="true"
                                  VBox.vgrow="ALWAYS" style="-fx-font-family: 'Courier New'; -fx-font-size: 12px;"/>
                    </VBox>
                </Tab>

                <!-- Course Roster Tab -->
                <Tab text="ðŸ“‹ Course Roster">
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label fx:id="rosterHeaderLabel" text="Course Roster"
                                   style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label fx:id="rosterCountLabel" text="Total Students: 0"
                                   style="-fx-font-weight: bold;"/>
                        </HBox>

                        <TableView fx:id="rosterTableView" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="rosterRegNoColumn" text="Reg No" prefWidth="100"/>
                                <TableColumn fx:id="rosterStudentNameColumn" text="Student Name" prefWidth="200"/>
                                <TableColumn fx:id="rosterEnrollmentDateColumn" text="Enrollment Date" prefWidth="120"/>
                                <TableColumn fx:id="rosterGradeColumn" text="Grade" prefWidth="80"/>
                                <TableColumn fx:id="rosterSemesterColumn" text="Semester" prefWidth="100"/>
                                <TableColumn fx:id="rosterYearColumn" text="Academic Year" prefWidth="120"/>
                            </columns>
                        </TableView>
                    </VBox>
                </Tab>

                <!-- Summary Tab -->
                <Tab text="ðŸ“Š Summary">
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <Label text="Enrollment Summary"
                               style="-fx-font-size: 14px; -fx-font-weight: bold;"/>

                        <TextArea fx:id="summaryTextArea" editable="false" wrapText="true"
                                  VBox.vgrow="ALWAYS" style="-fx-font-family: 'Courier New'; -fx-font-size: 12px;"/>
                    </VBox>
                </Tab>

            </TabPane>
        </VBox>

    </VBox>